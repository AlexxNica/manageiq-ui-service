<div pf-toolbar id="serviceExplorerHeader" config="vm.headerConfig"></div>

<div ng-if="vm.viewType == 'cardView'" class="col-md-12 list-view-container">
  <div pf-card-view id="cardView" config="vm.cardConfig" items="vm.servicesList">
    <h3>{{ item.name }}</h3>
    <div class="ss-card__logo_wrapper">
      <img ng-if="item.picture.image_href" class="ss-card__logo" alt="{{ item.name }}"
           ng-src="{{ item.picture.image_href }}"/>
      <img ng-if="!item.picture.image_href" class="ss-card__logo" alt="{{ item.name }}" src="./images/service.png"/>
    </div>
    <span tooltip=" {{item.description}} " tooltip-placement="right"></i>
      <strong translate>Description </strong>
      <i class="fa fa-info-circle blue"></i>
    </span>
    <div>
      <power-state item="item"></power-state>
    </div>
  </div>
</div>

<!--<div ng-if="vm.viewType == 'tableView'" class="col-md-12 list-view-container">-->
<!--{{vm.fetchedServices}}-->
<!--</div>-->

<div ng-if="vm.viewType == 'listView'" class="col-md-12 list-view-container">
  <div pf-list-view id="serviceList" class="arbitration-profiles-list" config="vm.listConfig" items="vm.servicesList"
       action-buttons="vm.actionButtons"
       enable-button-for-item-fn="vm.enableButtonForItemFn"
       menu-actions="vm.menuActions"
       update-menu-action-for-item-fn="vm.updateMenuActionForItemFn"
       hide-menu-for-item-fn="vm.hideMenuForItemFn">
    <div class="row">
      <div class="col-lg-3 col-md-4 col-sm-6 col-xs-6">
        <span class="no-wrap">
          <span class="ss-list-view__title-img">
            <span class="ss-list-view__title-img__center"></span>
            <img class="ss-list-view__title-img__logo" ng-src="{{ item.picture.image_href }}"
                 ng-if=" item.picture.image_href"/>
            <img class="ss-list-view__title-img__logo" src="images/service.png" ng-if=" !item.picture.image_href"/>
          </span>
          <span tooltip="{{ item.name }}" tooltip-placement="bottom">
            {{ item.name }}
          </span>
        </span>
      </div>
      <div class="col-lg-2 col-md-4 col-sm-6 col-xs-6">
        <span class="no-wrap">
          <strong translate>Retires</strong>&nbsp;
          <span ng-if=(item.retires_on) tooltip="{{ item.retires_on | date }}" tooltip-placement="bottom">
            {{ item.retires_on | date }}
          </span>
          <span ng-if=!(item.retires_on) translate tooltip="{{'Never'|translate}}" tooltip-placement="bottom">
            Never
          </span>
        </span>
      </div>
      <div class="col-lg-1 col-md-2 hidden-sm hidden-xs">
        <span class="no-wrap">
           <i class="pficon pficon-screen" tooltip="{{'The number of instances running this service'|translate}}"
              tooltip-placement="bottom"></i>
          <span tooltip="{{ '[[number]] VMs'|translate|substitute:{number: item.v_total_vms} }}"
                tooltip-placement="bottom">
            <strong>{{ item.v_total_vms}}</strong>
            {{'VMs'|translate}}
          </span>
        </span>
      </div>
      <div class="col-lg-1 hidden-md hidden-sm hidden-xs">
        <span class="no-wrap">
          <b tooltip="{{ 'Relative cost' }}" tooltip-placement="bottom">
            {{ item.chargeback_relative_cost }}
          </b>
        </span>
      </div>
      <div class="col-lg-2 col-md-2 hidden-sm hidden-xs">
        <span class="no-wrap">
          <i class="pficon pficon-user" tooltip="{{'Owner'|translate}}" tooltip-placement="bottom"></i>
          <span tooltip="{{ item.evm_owner.name }}" tooltip-placement="bottom">
            {{ item.evm_owner.name }}
          </span>
        </span>
      </div>
      <div class="col-lg-1 hidden-md hidden-sm hidden-xs">
        <span class="no-wrap">
          <strong translate>Created</strong>&nbsp;
          <span tooltip="{{ item.created_at | date }}" tooltip-placement="bottom">
            {{ item.created_at | date }}
          </span>
        </span>
      </div>
      <div class="col-lg-2 hidden-md hidden-sm hidden-xs pull-right">
        <power-state item="item"></power-state>
      </div>
    </div>
  </div>
</div>

<div pf-toolbar id="serviceExplorerFooter" config="vm.footerConfig">
  <actions class="pull-right">

    <span class="dropup primary-action pull-left" dropdown>
      <button type="button" class="btn dropdown-toggle btn-default" dropdown-toggle type="button">
        {{vm.serviceLimit}}
        <span translate>items</span>
        <span class="caret"></span>
      </button>
        <ul class="dropdown-menu">
          <li role="menuitem" ng-repeat="item in vm.serviceLimitOptions" ng-click="vm.updateLimit(item)">
            <a>
              {{ item }}
              <span translate>items</span>
            </a>
          </li>
        </ul>
    </span>

    <explorer-pagination limit="vm.serviceLimit" offset="vm.serviceOffset" count="vm.serviceCount"
                         on-update="vm.resolveServices(vm.serviceLimit, offset)"></explorer-pagination>
  </actions>
</div>

